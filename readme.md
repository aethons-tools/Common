# Aethon's Tools - Common

This repo provides common tools and assets for other Aethon's Tools repos;
it is designed to be used as a submodule.

### Setting up a New Aethon's Tools Repo
Add the submodule to the root of the client repo, mapped as "Common"
and run the 'Init' target to perform initial setup:

````
> git submodule add https://github.com/aethons-tools/Common
> Common\build -target Init
````

### Cloning an Existing Aethon's Tools Repo
After cloning the repo, initialize and fetch the submodule
and then run the 'Init' target:
````
> git submodule update --init
> Common\build -target Init
````

### Client Repo Requirements
The client repo should use the following directory structure:
````
- {repo-name}
 - {repo-name}.sln
 - src
   - {project-name}
     - {project-name}.csproj
     - [{project-name}.nuspec]
 - test
   - {test-project-name}
     - {test-project-name}.csproj 
 - [Common]
````

- For now, only `.csproj`-based projects are supported. `project.json`
  projects will be supported when the .NET CLI is stabilized.
- There can be multiple projects and test projects.
  Projects to be packaged should be placed in the `src` folder.
- Test projects should be placed in the `test` folder.
  **NUnit v3** should be used to define the tests.

### Assembly Info and Versioning
Two files will be provided in the `Common` submodule:
- `CommonAssemblyInfo.cs` - contains assembly metadata attributes
  that will be common to all Aethon's Tools assemblies.
- `AssemblyVersionInfo.cs` - contains the assembly version attributes
  to apply to versioned assemblies. _Note that this file is dynamically generated by
  the build script and may not be available until the build script is executed the first time._

These two files should be added to each packaged project's `.csproj` file (i.e., projects
in the `src` folder):

````xml
...
  <ItemGroup>
    <Compile Include="..\..\Common\AssemblyInfo.Common.cs"/>
    <Compile Include="..\..\Common\AssemblyInfo.Version.cs"/>
  </ItemGroup>
...
````

### Build Script
To build, test, package and deploy (locally):
````
> Common\build
````

By default, this builds the Release configuration. To build another configuration:
````
> Common\build -configuration {config-name}
````

